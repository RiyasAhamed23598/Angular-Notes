## Creating a custom structural Directive

```
@Directive ({
  selector: '[myFor][myForOf]'
})
export class MyForDirective {
  @Input() 
  set myForOf(collection) {
    this.view.clear();
    
    collection.forEach(item, index) => {
      this.view.createEmbeddedView(this.template, {
        $implicit: item,
        index
      })
    });
  }

  constructor (
    private view: ViewContainerRef,
    private template: TemplateRef<any>
  )
}
```

## Creating a custom pipe

```
@Pipe({
  name: 'filesize'
})
export class FileSizePipe implements PipeTransform {
  transform(size: number, extension: string = 'MB') {
    return (size / (1024*1024)).toFixed(2) + extension;
  }
}
```
**pipe as provider**
```
constructor (private fileSizePipe: FileSizePipe){}

ngOnInit() {
  const size = this.fileSizePipe.transform(this.size, 'mb');
}

```

## Reactive Forms

in html template: 
- [formGroup]="form
- formGroupName="store"
- formControlName="code"
- formArrayName="stock"

in component:
```
form = new FromGroup({
  store: new FormGroup({
    code: new FormControl('b1b2')
  }),
  stock: new FormArray([])
})
```

**<pre> {{form.value | json }} </pre>** - for visual representation of form

add formGroup to formArray

```
  const control = this.form.get('stock') as FormArray;
  constrol.push(this.createStock(stock)); // creates FormGroup from passed data
```

remove formGroup from formArray

```
  const control = this.form.get('stock') as FormArray;
  control.removeAt(index)
```
#### Using a formbuilder
```
form = this.fb.group({
  store: this.fb.group({
    code: ''
  }),
  stock: this.fb.array([])
})
```
